#!/usr/bin/env ruby
require File.expand_path('../../lib/rutt.rb', __FILE__)

RIP_ROOT = '~/Audio/rutt'
MP3_ROOT = '~/Audio/Lossy'
FLAC_ROOT= '~/Audio/Lossless'

cd = Cd.new(RIP_ROOT)

cd.fetch_metadata
cd.write_metadata_to_file
yaml_path = cd.yaml_path

# Open Editor for CD Info
system("/usr/bin/editor #{yaml_path}")
cd.reload_album_info_from_yaml

cd.rip_to_wav

disc_path = cd.disc_path
wav_path = cd.wav_path

transcoder = Transcoder.new(wav_path)

mp3_path = "#{disc_path}/mp3"
transcoder.convert_all_to_mp3(mp3_path)

#Rename/Move Files
#Add id3v2 tags

# Rip WAV to Flac
flac_path = "#{disc_path}/flac"
transcoder.convert_all_to_flac(flac_path)

#Rename/Move Files
#Add metaflac tags
